/*! Editor.md v1.5.1 | /Users/HaPBoy/osc/editor.md/lib/codemirror/addons.min.js | Open source online markdown editor. | MIT License | By: Pandao | https://github.com/pandao/editor.md | 2019-11-28 */
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineOption("showTrailingSpace",!1,function(t,i,o){o==e.Init&&(o=!1),o&&!i?t.removeOverlay("trailingspace"):!o&&i&&t.addOverlay({token:function(e){for(var t=e.string.length,i=t;i&&/\s/.test(e.string.charAt(i-1));--i);return i>e.pos?(e.pos=i,null):(e.pos=t,"trailingspace")},name:"trailingspace"})})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(t,i,o){var r,n=t.getWrapperElement();return r=n.appendChild(document.createElement("div")),r.className=o?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof i?r.innerHTML=i:r.appendChild(i),e.addClass(n,"dialog-opened"),r}function i(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(o,r,n){function a(t){if("string"==typeof t)d.value=t;else{if(c)return;c=!0,e.rmClass(l.parentNode,"dialog-opened"),l.parentNode.removeChild(l),h.focus(),n.onClose&&n.onClose(l)}}n||(n={}),i(this,null);var s,l=t(this,o,n.bottom),c=!1,h=this,d=l.getElementsByTagName("input")[0];return d?(d.focus(),n.value&&(d.value=n.value,!1!==n.selectValueOnOpen&&d.select()),n.onInput&&e.on(d,"input",function(e){n.onInput(e,d.value,a)}),n.onKeyUp&&e.on(d,"keyup",function(e){n.onKeyUp(e,d.value,a)}),e.on(d,"keydown",function(t){n&&n.onKeyDown&&n.onKeyDown(t,d.value,a)||((27==t.keyCode||!1!==n.closeOnEnter&&13==t.keyCode)&&(d.blur(),e.e_stop(t),a()),13==t.keyCode&&r(d.value,t))}),!1!==n.closeOnBlur&&e.on(d,"blur",a)):(s=l.getElementsByTagName("button")[0])&&(e.on(s,"click",function(){a(),h.focus()}),!1!==n.closeOnBlur&&e.on(s,"blur",a),s.focus()),a}),e.defineExtension("openConfirm",function(o,r,n){function a(){c||(c=!0,e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),h.focus())}i(this,null);var s=t(this,o,n&&n.bottom),l=s.getElementsByTagName("button"),c=!1,h=this,d=1;l[0].focus();for(var u=0;u<l.length;++u){var f=l[u];!function(t){e.on(f,"click",function(i){e.e_preventDefault(i),a(),t&&t(h)})}(r[u]),e.on(f,"blur",function(){--d,setTimeout(function(){d<=0&&a()},200)}),e.on(f,"focus",function(){++d})}}),e.defineExtension("openNotification",function(o,r){function n(){l||(l=!0,clearTimeout(a),e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s))}i(this,n);var a,s=t(this,o,r&&r.bottom),l=!1,c=r&&void 0!==r.duration?r.duration:5e3;return e.on(s,"click",function(t){e.e_preventDefault(t),n()}),c&&(a=setTimeout(n,c)),n})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}function i(e,i){for(var o=t(e),r=o,n=0;n<i.length;n++)-1==r.indexOf(i.charAt(n))&&(r+=i.charAt(n));return o==r?e:new RegExp(e.source,r)}function o(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function r(e,t,o){t=i(t,"g");for(var r=o.line,n=o.ch,a=e.lastLine();r<=a;r++,n=0){t.lastIndex=n;var s=e.getLine(r),l=t.exec(s);if(l)return{from:g(r,l.index),to:g(r,l.index+l[0].length),match:l}}}function n(e,t,n){if(!o(t))return r(e,t,n);t=i(t,"gm");for(var a,s=1,l=n.line,c=e.lastLine();l<=c;){for(var h=0;h<s&&!(l>c);h++){var d=e.getLine(l++);a=null==a?d:a+"\n"+d}s*=2,t.lastIndex=n.ch;var u=t.exec(a);if(u){var f=a.slice(0,u.index).split("\n"),p=u[0].split("\n"),m=n.line+f.length-1,v=f[f.length-1].length;return{from:g(m,v),to:g(m+p.length-1,1==p.length?v+p[0].length:p[p.length-1].length),match:u}}}}function a(e,t,i){for(var o,r=0;r<=e.length;){t.lastIndex=r;var n=t.exec(e);if(!n)break;var a=n.index+n[0].length;if(a>e.length-i)break;(!o||a>o.index+o[0].length)&&(o=n),r=n.index+1}return o}function s(e,t,o){t=i(t,"g");for(var r=o.line,n=o.ch,s=e.firstLine();r>=s;r--,n=-1){var l=e.getLine(r),c=a(l,t,n<0?0:l.length-n);if(c)return{from:g(r,c.index),to:g(r,c.index+c[0].length),match:c}}}function l(e,t,r){if(!o(t))return s(e,t,r);t=i(t,"gm");for(var n,l=1,c=e.getLine(r.line).length-r.ch,h=r.line,d=e.firstLine();h>=d;){for(var u=0;u<l&&h>=d;u++){var f=e.getLine(h--);n=null==n?f:f+"\n"+n}l*=2;var p=a(n,t,c);if(p){var m=n.slice(0,p.index).split("\n"),v=p[0].split("\n"),w=h+m.length,y=m[m.length-1].length;return{from:g(w,y),to:g(w+v.length-1,1==v.length?y+v[0].length:v[v.length-1].length),match:p}}}}function c(e,t,i,o){if(e.length==t.length)return i;for(var r=0,n=i+Math.max(0,e.length-t.length);;){if(r==n)return r;var a=r+n>>1,s=o(e.slice(0,a)).length;if(s==i)return a;s>i?n=a:r=a+1}}function h(e,t,i,o){if(!t.length)return null;var r=o?f:p,n=r(t).split(/\r|\n\r?/);e:for(var a=i.line,s=i.ch,l=e.lastLine()+1-n.length;a<=l;a++,s=0){var h=e.getLine(a).slice(s),d=r(h);if(1==n.length){var u=d.indexOf(n[0]);if(-1==u)continue e;var i=c(h,d,u,r)+s;return{from:g(a,c(h,d,u,r)+s),to:g(a,c(h,d,u+n[0].length,r)+s)}}var m=d.length-n[0].length;if(d.slice(m)==n[0]){for(var v=1;v<n.length-1;v++)if(r(e.getLine(a+v))!=n[v])continue e;var w=e.getLine(a+n.length-1),y=r(w),b=n[n.length-1];if(y.slice(0,b.length)==b)return{from:g(a,c(h,d,m,r)+s),to:g(a+n.length-1,c(w,y,b.length,r))}}}}function d(e,t,i,o){if(!t.length)return null;var r=o?f:p,n=r(t).split(/\r|\n\r?/);e:for(var a=i.line,s=i.ch,l=e.firstLine()-1+n.length;a>=l;a--,s=-1){var h=e.getLine(a);s>-1&&(h=h.slice(0,s));var d=r(h);if(1==n.length){var u=d.lastIndexOf(n[0]);if(-1==u)continue e;return{from:g(a,c(h,d,u,r)),to:g(a,c(h,d,u+n[0].length,r))}}var m=n[n.length-1];if(d.slice(0,m.length)==m){for(var v=1,i=a-n.length+1;v<n.length-1;v++)if(r(e.getLine(i+v))!=n[v])continue e;var w=e.getLine(a+1-n.length),y=r(w);if(y.slice(y.length-n[0].length)==n[0])return{from:g(a+1-n.length,c(w,y,w.length-n[0].length,r)),to:g(a,c(h,d,m.length,r))}}}}function u(e,t,o,a){this.atOccurrence=!1,this.doc=e,o=o?e.clipPos(o):g(0,0),this.pos={from:o,to:o};var c;"object"==typeof a?c=a.caseFold:(c=a,a=null),"string"==typeof t?(null==c&&(c=!1),this.matches=function(i,o){return(i?d:h)(e,t,o,c)}):(t=i(t,"gm"),a&&!1===a.multiline?this.matches=function(i,o){return(i?s:r)(e,t,o)}:this.matches=function(i,o){return(i?l:n)(e,t,o)})}var f,p,g=e.Pos;String.prototype.normalize?(f=function(e){return e.normalize("NFD").toLowerCase()},p=function(e){return e.normalize("NFD")}):(f=function(e){return e.toLowerCase()},p=function(e){return e}),u.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var i=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));i&&0==e.cmpPos(i.from,i.to);)t?i.from.ch?i.from=g(i.from.line,i.from.ch-1):i=i.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(g(i.from.line-1))):i.to.ch<this.doc.getLine(i.to.line).length?i.to=g(i.to.line,i.to.ch+1):i=i.to.line==this.doc.lastLine()?null:this.matches(t,g(i.to.line+1,0));if(i)return this.pos=i,this.atOccurrence=!0,this.pos.match||!0;var o=g(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:o,to:o},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,i){if(this.atOccurrence){var o=e.splitLines(t);this.doc.replaceRange(o,this.pos.from,this.pos.to,i),this.pos.to=g(this.pos.from.line+o.length-1,o[o.length-1].length+(1==o.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,i){return new u(this.doc,e,t,i)}),e.defineDocExtension("getSearchCursor",function(e,t,i){return new u(this,e,t,i)}),e.defineExtension("selectMatches",function(t,i){for(var o=[],r=this.getSearchCursor(t,this.getCursor("from"),i);r.findNext()&&!(e.cmpPos(r.to(),this.getCursor("to"))>0);)o.push({anchor:r.from(),head:r.to()});o.length&&this.setSelections(o,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var i=e.exec(t.string);if(i&&i.index==t.pos)return t.pos+=i[0].length||1,"searching";i?t.pos=i.index:t.skipToEnd()}}}function i(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function o(e){return e.state.search||(e.state.search=new i)}function r(e){return"string"==typeof e&&e==e.toLowerCase()}function n(e,t,i){return e.getSearchCursor(t,i,{caseFold:r(t),multiline:!0})}function a(e,t,i,o,r){e.openDialog(t,o,{value:i,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){p(e)},onKeyDown:r})}function s(e,t,i,o,r){e.openDialog?e.openDialog(t,r,{value:o,selectValueOnOpen:!0}):r(prompt(i,o))}function l(e,t,i,o){e.openConfirm?e.openConfirm(t,o):confirm(i)&&o[0]()}function c(e){return e.replace(/\\([nrt\\])/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"==t?"\\":e})}function h(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=c(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function d(e,i,o){i.queryText=o,i.query=h(o),e.removeOverlay(i.overlay,r(i.query)),i.overlay=t(i.query,r(i.query)),e.addOverlay(i.overlay),e.showMatchesOnScrollbar&&(i.annotate&&(i.annotate.clear(),i.annotate=null),i.annotate=e.showMatchesOnScrollbar(i.query,r(i.query)))}function u(t,i,r,n){var l=o(t);if(l.query)return f(t,i);var c=t.getSelection()||l.lastQuery;if(c instanceof RegExp&&"x^"==c.source&&(c=null),r&&t.openDialog){var h=null,u=function(i,o){e.e_stop(o),i&&(i!=l.queryText&&(d(t,l,i),l.posFrom=l.posTo=t.getCursor()),h&&(h.style.opacity=1),f(t,o.shiftKey,function(e,i){var o;i.line<3&&document.querySelector&&(o=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&o.getBoundingClientRect().bottom-4>t.cursorCoords(i,"window").top&&((h=o).style.opacity=.4)}))};a(t,g(t),c,u,function(i,r){var n=e.keyName(i),a=t.getOption("extraKeys"),s=a&&a[n]||e.keyMap[t.getOption("keyMap")][n];"findNext"==s||"findPrev"==s||"findPersistentNext"==s||"findPersistentPrev"==s?(e.e_stop(i),d(t,o(t),r),t.execCommand(s)):"find"!=s&&"findPersistent"!=s||(e.e_stop(i),u(r,i))}),n&&c&&(d(t,l,c),f(t,i))}else s(t,g(t),"Search for:",c,function(e){e&&!l.query&&t.operation(function(){d(t,l,e),l.posFrom=l.posTo=t.getCursor(),f(t,i)})})}function f(t,i,r){t.operation(function(){var a=o(t),s=n(t,a.query,i?a.posFrom:a.posTo);(s.find(i)||(s=n(t,a.query,i?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),s.find(i)))&&(t.setSelection(s.from(),s.to()),t.scrollIntoView({from:s.from(),to:s.to()},20),a.posFrom=s.from(),a.posTo=s.to(),r&&r(s.from(),s.to()))})}function p(e){e.operation(function(){var t=o(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}function g(e){return'<span class="CodeMirror-search-label">'+e.phrase("Search:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function m(e){return' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function v(e){return'<span class="CodeMirror-search-label">'+e.phrase("With:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>'}function w(e){return'<span class="CodeMirror-search-label">'+e.phrase("Replace?")+"</span> <button>"+e.phrase("Yes")+"</button> <button>"+e.phrase("No")+"</button> <button>"+e.phrase("All")+"</button> <button>"+e.phrase("Stop")+"</button> "}function y(e,t,i){e.operation(function(){for(var o=n(e,t);o.findNext();)if("string"!=typeof t){var r=e.getRange(o.from(),o.to()).match(t);o.replace(i.replace(/\$(\d)/g,function(e,t){return r[t]}))}else o.replace(i)})}function b(e,t){if(!e.getOption("readOnly")){var i=e.getSelection()||o(e).lastQuery,r='<span class="CodeMirror-search-label">'+(t?e.phrase("Replace all:"):e.phrase("Replace:"))+"</span>";s(e,r+m(e),r,i,function(i){i&&(i=h(i),s(e,v(e),e.phrase("Replace with:"),"",function(o){if(o=c(o),t)y(e,i,o);else{p(e);var r=n(e,i,e.getCursor("from")),a=function(){var t,c=r.from();!(t=r.findNext())&&(r=n(e,i),!(t=r.findNext())||c&&r.from().line==c.line&&r.from().ch==c.ch)||(e.setSelection(r.from(),r.to()),e.scrollIntoView({from:r.from(),to:r.to()}),l(e,w(e),e.phrase("Replace?"),[function(){s(t)},a,function(){y(e,i,o)}]))},s=function(e){r.replace("string"==typeof i?o:o.replace(/\$(\d)/g,function(t,i){return e[i]})),a()};a()}}))})}}e.commands.find=function(e){p(e),u(e)},e.commands.findPersistent=function(e){p(e),u(e,!1,!0)},e.commands.findPersistentNext=function(e){u(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){u(e,!0,!0,!0)},e.commands.findNext=u,e.commands.findPrev=function(e){u(e,!0)},e.commands.clearSearch=p,e.commands.replace=b,e.commands.replaceAll=function(e){b(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function i(e){clearTimeout(o.doRedraw),o.doRedraw=setTimeout(function(){o.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var o=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(o.doUpdate),o.doUpdate=setTimeout(function(){o.computeScale()&&i(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),!1!==t.listenForChanges&&e.on("changes",this.changeHandler=function(){i(250)})}e.defineExtension("annotateScrollbar",function(e){return"string"==typeof e&&(e={className:e}),new t(this,e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,t=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.getScrollerElement().scrollHeight;if(t!=this.hScale)return this.hScale=t,!0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){function t(e,t){return l!=e.line&&(l=e.line,c=i.getLineHandle(l)),c.widgets&&c.widgets.length||a&&c.height>s?i.charCoords(e,"local")[t?"top":"bottom"]:i.heightAtLine(c,"local")+(t?0:c.height)}!1!==e&&this.computeScale();var i=this.cm,o=this.hScale,r=document.createDocumentFragment(),n=this.annotations,a=i.getOption("lineWrapping"),s=a&&1.5*i.defaultTextHeight(),l=null,c=null,h=i.lastLine();if(i.display.barWidth)for(var d,u=0;u<n.length;u++){var f=n[u];if(!(f.to.line>h)){for(var p=d||t(f.from,!0)*o,g=t(f.to,!1)*o;u<n.length-1&&!(n[u+1].to.line>h)&&!((d=t(n[u+1].from,!0)*o)>g+.9);)f=n[++u],g=t(f.to,!1)*o;if(g!=p){var m=Math.max(g-p,3),v=r.appendChild(document.createElement("div"));v.style.cssText="position: absolute; right: 0px; width: "+Math.max(i.display.barWidth-1,2)+"px; top: "+(p+this.buttonHeight)+"px; height: "+m+"px",v.className=this.options.className,f.id&&v.setAttribute("annotation-id",f.id)}}}this.div.textContent="",this.div.appendChild(r)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,i,o){this.cm=e,this.options=o;var r={listenForChanges:!1};for(var n in o)r[n]=o[n];r.className||(r.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(r),this.query=t,this.caseFold=i,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var a=this;e.on("change",this.changeHandler=function(e,t){a.onChange(t)})}function i(e,t,i){return e<=t?e:Math.max(t,e+i)}e.defineExtension("showMatchesOnScrollbar",function(e,i,o){return"string"==typeof o&&(o={className:o}),o||(o={}),new t(this,e,i,o)});var o=1e3;t.prototype.findMatches=function(){if(this.gap){for(var t=0;t<this.matches.length;t++){var i=this.matches[t];if(i.from.line>=this.gap.to)break;i.to.line>=this.gap.from&&this.matches.splice(t--,1)}for(var r=this.cm.getSearchCursor(this.query,e.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),n=this.options&&this.options.maxMatches||o;r.findNext();){var i={from:r.from(),to:r.to()};if(i.from.line>=this.gap.to)break;if(this.matches.splice(t++,0,i),this.matches.length>n)break}this.gap=null}},t.prototype.onChange=function(t){var o=t.from.line,r=e.changeEnd(t).line,n=r-t.to.line;if(this.gap?(this.gap.from=Math.min(i(this.gap.from,o,n),t.from.line),this.gap.to=Math.max(i(this.gap.to,o,n),t.from.line)):this.gap={from:t.from.line,to:r+1},n)for(var a=0;a<this.matches.length;a++){var s=this.matches[a],l=i(s.from.line,o,n);l!=s.from.line&&(s.from=e.Pos(l,s.from.ch));var c=i(s.to.line,o,n);c!=s.to.line&&(s.to=e.Pos(c,s.to.ch))}clearTimeout(this.update);var h=this;this.update=setTimeout(function(){h.updateAfterChange()},250)},t.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},t.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function i(e){t(e);var i=e.state.placeholder=document.createElement("pre");i.style.cssText="height: 0; overflow: visible",i.style.direction=e.getOption("direction"),i.className="CodeMirror-placeholder CodeMirror-line-like";var o=e.getOption("placeholder");"string"==typeof o&&(o=document.createTextNode(o)),i.appendChild(o),e.display.lineSpace.insertBefore(i,e.display.lineSpace.firstChild)}function o(e){n(e)&&i(e)}function r(e){var o=e.getWrapperElement(),r=n(e);o.className=o.className.replace(" CodeMirror-empty","")+(r?" CodeMirror-empty":""),r?i(e):t(e)}function n(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(i,n,a){var s=a&&a!=e.Init;if(n&&!s)i.on("blur",o),i.on("change",r),i.on("swapDoc",r),r(i);else if(!n&&s){i.off("blur",o),i.off("change",r),i.off("swapDoc",r),t(i);var l=i.getWrapperElement();l.className=l.className.replace(" CodeMirror-empty","")}n&&!i.hasFocus()&&o(i)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){function t(t){if(t.getOption("disableInput"))return e.Pass;for(var i=t.listSelections(),o=[],l=t.getOption("autoCloseTags"),c=0;c<i.length;c++){if(!i[c].empty())return e.Pass;var h=i[c].head,d=t.getTokenAt(h),u=e.innerMode(t.getMode(),d.state),f=u.state,p=u.mode.xmlCurrentTag&&u.mode.xmlCurrentTag(f),g=p&&p.name;if(!g)return e.Pass;var m="html"==u.mode.configuration,v="object"==typeof l&&l.dontCloseTags||m&&a,w="object"==typeof l&&l.indentTags||m&&s;d.end>h.ch&&(g=g.slice(0,g.length-d.end+h.ch));var y=g.toLowerCase();if(!g||"string"==d.type&&(d.end!=h.ch||!/[\"\']/.test(d.string.charAt(d.string.length-1))||1==d.string.length)||"tag"==d.type&&p.close||d.string.indexOf("/")==h.ch-d.start-1||v&&r(v,y)>-1||n(t,u.mode.xmlCurrentContext&&u.mode.xmlCurrentContext(f)||[],g,h,!0))return e.Pass;var b="object"==typeof l&&l.emptyTags;if(b&&r(b,g)>-1)o[c]={text:"/>",newPos:e.Pos(h.line,h.ch+2)};else{var x=w&&r(w,y)>-1;o[c]={indent:x,text:">"+(x?"\n\n":"")+"</"+g+">",newPos:x?e.Pos(h.line+1,0):e.Pos(h.line,h.ch+1)}}}for(var k="object"==typeof l&&l.dontIndentOnAutoClose,c=i.length-1;c>=0;c--){var C=o[c];t.replaceRange(C.text,i[c].head,i[c].anchor,"+insert");var S=t.listSelections().slice(0);S[c]={head:C.newPos,anchor:C.newPos},t.setSelections(S),!k&&C.indent&&(t.indentLine(C.newPos.line,null,!0),t.indentLine(C.newPos.line+1,null,!0))}}function i(t,i){for(var o=t.listSelections(),r=[],a=i?"/":"</",s=t.getOption("autoCloseTags"),l="object"==typeof s&&s.dontIndentOnSlash,c=0;c<o.length;c++){if(!o[c].empty())return e.Pass;var h=o[c].head,d=t.getTokenAt(h),u=e.innerMode(t.getMode(),d.state),f=u.state;if(i&&("string"==d.type||"<"!=d.string.charAt(0)||d.start!=h.ch-1))return e.Pass;var p,g="xml"!=u.mode.name&&"htmlmixed"==t.getMode().name;if(g&&"javascript"==u.mode.name)p=a+"script";else if(g&&"css"==u.mode.name)p=a+"style";else{var m=u.mode.xmlCurrentContext&&u.mode.xmlCurrentContext(f);if(!m||m.length&&n(t,m,m[m.length-1],h))return e.Pass;p=a+m[m.length-1]}">"!=t.getLine(h.line).charAt(d.end)&&(p+=">"),r[c]=p}if(t.replaceSelections(r),o=t.listSelections(),!l)for(var c=0;c<o.length;c++)(c==o.length-1||o[c].head.line<o[c+1].head.line)&&t.indentLine(o[c].head.line)}function o(t){return t.getOption("disableInput")?e.Pass:i(t,!0)}function r(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,o=e.length;i<o;++i)if(e[i]==t)return i;return-1}function n(t,i,o,r,n){if(!e.scanForClosingTag)return!1;var a=Math.min(t.lastLine()+1,r.line+500),s=e.scanForClosingTag(t,r,null,a);if(!s||s.tag!=o)return!1;for(var l=n?1:0,c=i.length-1;c>=0&&i[c]==o;c--)++l;r=s.to;for(var c=1;c<l;c++){var h=e.scanForClosingTag(t,r,null,a);if(!h||h.tag!=o)return!1;r=h.to}return!0}e.defineOption("autoCloseTags",!1,function(i,r,n){if(n!=e.Init&&n&&i.removeKeyMap("autoCloseTags"),r){var a={name:"autoCloseTags"};("object"!=typeof r||r.whenClosing)&&(a["'/'"]=function(e){return o(e)}),("object"!=typeof r||r.whenOpening)&&(a["'>'"]=function(e){return t(e)}),i.addKeyMap(a)}});var a=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],s=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];e.commands.closeTag=function(e){return i(e)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,r,n,a){function s(e){var i=l(t,r);if(!i||i.to.line-i.from.line<c)return null;for(var o=t.findMarksAt(i.from),n=0;n<o.length;++n)if(o[n].__isFold&&"fold"!==a){if(!e)return null;i.cleared=!0,o[n].clear()}return i}if(n&&n.call){var l=n;n=null}else var l=o(t,n,"rangeFinder");"number"==typeof r&&(r=e.Pos(r,0));var c=o(t,n,"minFoldSize"),h=s(!0);if(o(t,n,"scanUp"))for(;!h&&r.line>t.firstLine();)r=e.Pos(r.line-1,0),h=s(!1);if(h&&!h.cleared&&"unfold"!==a){var d=i(t,n);e.on(d,"mousedown",function(t){u.clear(),e.e_preventDefault(t)});var u=t.markText(h.from,h.to,{replacedWith:d,clearOnEnter:o(t,n,"clearOnEnter"),__isFold:!0});u.on("clear",function(i,o){e.signal(t,"unfold",t,i,o)}),e.signal(t,"fold",t,h.from,h.to)}}function i(e,t){var i=o(e,t,"widget");if("string"==typeof i){var r=document.createTextNode(i);i=document.createElement("span"),i.appendChild(r),i.className="CodeMirror-foldmarker"}else i&&(i=i.cloneNode(!0));return i}function o(e,t,i){if(t&&void 0!==t[i])return t[i];var o=e.options.foldOptions;return o&&void 0!==o[i]?o[i]:r[i]}e.newFoldFunction=function(e,i){return function(o,r){t(o,r,{rangeFinder:e,widget:i})}},e.defineExtension("foldCode",function(e,i,o){t(this,e,i,o)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),i=0;i<t.length;++i)if(t[i].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var i=t.firstLine(),o=t.lastLine();i<=o;i++)t.foldCode(e.Pos(i,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var i=t.firstLine(),o=t.lastLine();i<=o;i++)t.foldCode(e.Pos(i,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,i){for(var o=0;o<e.length;++o){var r=e[o](t,i);if(r)return r}}}),e.registerHelper("fold","auto",function(e,t){for(var i=e.getHelpers(t,"fold"),o=0;o<i.length;o++){var r=i[o](e,t);if(r)return r}});var r={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return o(this,e,t)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(e){"use strict";function t(e){this.options=e,this.from=this.to=0}function i(e){return!0===e&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function o(e,t){for(var i=e.findMarks(u(t,0),u(t+1,0)),o=0;o<i.length;++o)if(i[o].__isFold){var r=i[o].find(-1);if(r&&r.line===t)return i[o]}}function r(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function n(e,t,i){var n=e.state.foldGutter.options,s=t-1,l=e.foldOption(n,"minFoldSize"),c=e.foldOption(n,"rangeFinder"),h="string"==typeof n.indicatorFolded&&a(n.indicatorFolded),d="string"==typeof n.indicatorOpen&&a(n.indicatorOpen);e.eachLine(t,i,function(t){++s;var i=null,a=t.gutterMarkers;if(a&&(a=a[n.gutter]),o(e,s)){if(h&&a&&h.test(a.className))return;i=r(n.indicatorFolded)}else{var f=u(s,0),p=c&&c(e,f);if(p&&p.to.line-p.from.line>=l){if(d&&a&&d.test(a.className))return;i=r(n.indicatorOpen)}}(i||a)&&e.setGutterMarker(t,n.gutter,i)})}function a(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function s(e){var t=e.getViewport(),i=e.state.foldGutter;i&&(e.operation(function(){n(e,t.from,t.to)}),i.from=t.from,i.to=t.to)}function l(e,t,i){var r=e.state.foldGutter;if(r){var n=r.options;if(i==n.gutter){var a=o(e,t);a?a.clear():e.foldCode(u(t,0),n)}}}function c(e){var t=e.state.foldGutter;if(t){var i=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){s(e)},i.foldOnChangeTimeSpan||600)}}function h(e){var t=e.state.foldGutter;if(t){var i=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var i=e.getViewport();t.from==t.to||i.from-t.to>20||t.from-i.to>20?s(e):e.operation(function(){i.from<t.from&&(n(e,i.from,t.from),t.from=i.from),i.to>t.to&&(n(e,t.to,i.to),t.to=i.to)})},i.updateViewportTimeSpan||400)}}function d(e,t){var i=e.state.foldGutter;if(i){var o=t.line;o>=i.from&&o<i.to&&n(e,o,o+1)}}e.defineOption("foldGutter",!1,function(o,r,n){n&&n!=e.Init&&(o.clearGutter(o.state.foldGutter.options.gutter),o.state.foldGutter=null,o.off("gutterClick",l),o.off("changes",c),o.off("viewportChange",h),o.off("fold",d),o.off("unfold",d),o.off("swapDoc",c)),r&&(o.state.foldGutter=new t(i(r)),s(o),o.on("gutterClick",l),o.on("changes",c),o.on("viewportChange",h),o.on("fold",d),o.on("unfold",d),o.on("swapDoc",c))});var u=e.Pos}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,i){var o=t.getLine(i),r=o.search(/\S/);return-1==r||/\bcomment\b/.test(t.getTokenTypeAt(e.Pos(i,r+1)))?-1:e.countColumn(o,null,t.getOption("tabSize"))}e.registerHelper("fold","indent",function(i,o){var r=t(i,o.line);if(!(r<0)){for(var n=null,a=o.line+1,s=i.lastLine();a<=s;++a){var l=t(i,a);if(-1==l);else{if(!(l>r))break;n=a}}return n?{from:e.Pos(o.line,i.getLine(o.line).length),to:e.Pos(n,i.getLine(n).length)}:void 0}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","brace",function(t,i){function o(o){for(var s=i.ch,l=0;;){var c=s<=0?-1:a.lastIndexOf(o,s-1);if(-1!=c){if(1==l&&c<i.ch)break;if(r=t.getTokenTypeAt(e.Pos(n,c+1)),!/^(comment|string)/.test(r))return c+1;s=c-1}else{if(1==l)break;l=1,s=a.length}}}var r,n=i.line,a=t.getLine(n),s="{",l="}",c=o("{");if(null==c&&(s="[",l="]",c=o("[")),null!=c){var h,d,u=1,f=t.lastLine();e:for(var p=n;p<=f;++p)for(var g=t.getLine(p),m=p==n?c:0;;){var v=g.indexOf(s,m),w=g.indexOf(l,m);if(v<0&&(v=g.length),w<0&&(w=g.length),(m=Math.min(v,w))==g.length)break;if(t.getTokenTypeAt(e.Pos(p,m+1))==r)if(m==v)++u;else if(!--u){h=p,d=m;break e}++m}if(null!=h&&n!=h)return{from:e.Pos(n,c),to:e.Pos(h,d)}}}),e.registerHelper("fold","import",function(t,i){function o(i){if(i<t.firstLine()||i>t.lastLine())return null;var o=t.getTokenAt(e.Pos(i,1));if(/\S/.test(o.string)||(o=t.getTokenAt(e.Pos(i,o.end+1))),"keyword"!=o.type||"import"!=o.string)return null;for(var r=i,n=Math.min(t.lastLine(),i+10);r<=n;++r){var a=t.getLine(r),s=a.indexOf(";");if(-1!=s)return{startCh:o.end,end:e.Pos(r,s)}}}var r,n=i.line,a=o(n);if(!a||o(n-1)||(r=o(n-2))&&r.end.line==n-1)return null;for(var s=a.end;;){var l=o(s.line+1);if(null==l)break;s=l.end}return{from:t.clipPos(e.Pos(n,a.startCh+1)),to:s}}),e.registerHelper("fold","include",function(t,i){function o(i){if(i<t.firstLine()||i>t.lastLine())return null;var o=t.getTokenAt(e.Pos(i,1));return/\S/.test(o.string)||(o=t.getTokenAt(e.Pos(i,o.end+1))),"meta"==o.type&&"#include"==o.string.slice(0,8)?o.start+8:void 0}var r=i.line,n=o(r);if(null==n||null!=o(r-1))return null;for(var a=r;;){if(null==o(a+1))break;++a}return{from:e.Pos(r,n+1),to:t.clipPos(e.Pos(a))}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function i(e,t,i,o){this.line=t,this.ch=i,this.cm=e,this.text=e.getLine(t),this.min=o?Math.max(o.from,e.firstLine()):e.firstLine(),this.max=o?Math.min(o.to-1,e.lastLine()):e.lastLine()}function o(e,t){var i=e.cm.getTokenTypeAt(u(e.line,t));return i&&/\btag\b/.test(i)}function r(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function n(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function a(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(r(e))continue;return}{if(o(e,t+1)){var i=e.text.lastIndexOf("/",t),n=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,n?"selfClose":"regular"}e.ch=t+1}}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(n(e))continue;return}if(o(e,t+1)){g.lastIndex=t,e.ch=t;var i=g.exec(e.text);if(i&&i.index==t)return i}else e.ch=t}}function l(e){for(;;){g.lastIndex=e.ch;var t=g.exec(e.text);if(!t){if(r(e))continue;return}{if(o(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function c(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(n(e))continue;return}{if(o(e,t+1)){var i=e.text.lastIndexOf("/",t),r=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t}}}function h(e,t){for(var i=[];;){var o,r=l(e),n=e.line,s=e.ch-(r?r[0].length:0);if(!r||!(o=a(e)))return;if("selfClose"!=o)if(r[1]){for(var c=i.length-1;c>=0;--c)if(i[c]==r[2]){i.length=c;break}if(c<0&&(!t||t==r[2]))return{tag:r[2],from:u(n,s),to:u(e.line,e.ch)}}else i.push(r[2])}}function d(e,t){for(var i=[];;){var o=c(e);if(!o)return;if("selfClose"!=o){var r=e.line,n=e.ch,a=s(e);if(!a)return;if(a[1])i.push(a[2]);else{for(var l=i.length-1;l>=0;--l)if(i[l]==a[2]){i.length=l;break}if(l<0&&(!t||t==a[2]))return{tag:a[2],from:u(e.line,e.ch),to:u(r,n)}}}else s(e)}}var u=e.Pos,f="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=f+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",g=new RegExp("<(/?)(["+f+"]["+p+"]*)","g");e.registerHelper("fold","xml",function(e,o){for(var r=new i(e,o.line,0);;){var n=l(r);if(!n||r.line!=o.line)return;var s=a(r);if(!s)return;if(!n[1]&&"selfClose"!=s){var c=u(r.line,r.ch),d=h(r,n[2]);return d&&t(d.from,c)>0?{from:c,to:d.from}:null}}}),e.findMatchingTag=function(e,o,r){var n=new i(e,o.line,o.ch,r);if(-1!=n.text.indexOf(">")||-1!=n.text.indexOf("<")){var l=a(n),c=l&&u(n.line,n.ch),f=l&&s(n);if(l&&f&&!(t(n,o)>0)){var p={from:u(n.line,n.ch),to:c,tag:f[2]};return"selfClose"==l?{open:p,close:null,at:"open"}:f[1]?{open:d(n,f[2]),close:p,at:"close"}:(n=new i(e,c.line,c.ch,r),{open:p,close:h(n,f[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,o,r){for(var n=new i(e,t.line,t.ch,o);;){var a=d(n,r);if(!a)break;var s=new i(e,t.line,t.ch,o),l=h(s,a.tag);if(l)return{open:a,close:l}}},e.scanForClosingTag=function(e,t,o,r){return h(new i(e,t.line,t.ch,r?{from:0,to:r}:null),o)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","markdown",function(t,i){function o(i){var o=t.getTokenTypeAt(e.Pos(i,0));return o&&/\bheader\b/.test(o)}function r(e,t,i){var r=t&&t.match(/^#+/);return r&&o(e)?r[0].length:(r=i&&i.match(/^[=\-]+\s*$/),r&&o(e+1)?"="==i[0]?1:2:n)}var n=100,a=t.getLine(i.line),s=t.getLine(i.line+1),l=r(i.line,a,s);if(l!==n){for(var c=t.lastLine(),h=i.line,d=t.getLine(h+2);h<c&&!(r(h+1,s,d)<=l);)++h,s=d,d=t.getLine(h+2);return{from:e.Pos(i.line,a.length),to:e.Pos(h,t.getLine(h).length)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(t,i){var o=t.getModeAt(i),r=o.blockCommentStart,n=o.blockCommentEnd;if(r&&n){for(var a,s=i.line,l=t.getLine(s),c=i.ch,h=0;;){var d=c<=0?-1:l.lastIndexOf(r,c-1);if(-1!=d){if(1==h&&d<i.ch)return;if(/comment/.test(t.getTokenTypeAt(e.Pos(s,d+1)))&&(0==d||l.slice(d-n.length,d)==n||!/comment/.test(t.getTokenTypeAt(e.Pos(s,d))))){a=d+r.length;break}c=d-1}else{if(1==h)return;h=1,c=l.length}}var u,f,p=1,g=t.lastLine();e:for(var m=s;m<=g;++m)for(var v=t.getLine(m),w=m==s?a:0;;){var y=v.indexOf(r,w),b=v.indexOf(n,w);if(y<0&&(y=v.length),b<0&&(b=v.length),(w=Math.min(y,b))==v.length)break;if(w==y)++p;else if(!--p){u=m,f=w;break e}++w}if(null!=u&&(s!=u||f!=a))return{from:e.Pos(s,a),to:e.Pos(u,f)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,i,o){return{startState:function(){return{base:e.startState(t),overlay:e.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(o){return{base:e.copyState(t,o.base),overlay:e.copyState(i,o.overlay),basePos:o.basePos,baseCur:null,overlayPos:o.overlayPos,overlayCur:null}},token:function(e,r){return(e!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<e.start)&&(r.streamSeen=e,r.basePos=r.overlayPos=e.start),e.start==r.basePos&&(r.baseCur=t.token(e,r.base),r.basePos=e.pos),e.start==r.overlayPos&&(e.pos=e.start,r.overlayCur=i.token(e,r.overlay),r.overlayPos=e.pos),e.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||o&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:t.indent&&function(e,i,o){return t.indent(e.base,i,o)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var r,n;return t.blankLine&&(r=t.blankLine(e.base)),i.blankLine&&(n=i.blankLine(e.overlay)),null==n?r:o&&null!=r?r+" "+n:n}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",n),e.removeLineClass(e.state.activeLines[t],"background",a),e.removeLineClass(e.state.activeLines[t],"gutter",s)}function i(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}function o(e,o){for(var r=[],l=0;l<o.length;l++){var c=o[l],h=e.getOption("styleActiveLine");if("object"==typeof h&&h.nonEmpty?c.anchor.line==c.head.line:c.empty()){var d=e.getLineHandleVisualStart(c.head.line);r[r.length-1]!=d&&r.push(d)}}i(e.state.activeLines,r)||e.operation(function(){t(e);for(var i=0;i<r.length;i++)e.addLineClass(r[i],"wrap",n),e.addLineClass(r[i],"background",a),e.addLineClass(r[i],"gutter",s);e.state.activeLines=r})}function r(e,t){o(e,t.ranges)}var n="CodeMirror-activeline",a="CodeMirror-activeline-background",s="CodeMirror-activeline-gutter";e.defineOption("styleActiveLine",!1,function(i,n,a){var s=a!=e.Init&&a;n!=s&&(s&&(i.off("beforeSelectionChange",r),t(i),delete i.state.activeLines),n&&(i.state.activeLines=[],o(i,i.listSelections()),i.on("beforeSelectionChange",r)))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==typeof e&&null!=e[t]?e[t]:d[t]}function i(e){for(var t=0;t<e.length;t++){var i=e.charAt(t),r="'"+i+"'";f[r]||(f[r]=o(i))}}function o(e){return function(t){return l(t,e)}}function r(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function n(i){var o=r(i);if(!o||i.getOption("disableInput"))return e.Pass;for(var n=t(o,"pairs"),a=i.listSelections(),s=0;s<a.length;s++){if(!a[s].empty())return e.Pass;var l=c(i,a[s].head);if(!l||n.indexOf(l)%2!=0)return e.Pass}for(var s=a.length-1;s>=0;s--){var h=a[s].head;i.replaceRange("",u(h.line,h.ch-1),u(h.line,h.ch+1),"+delete")}}function a(i){var o=r(i),n=o&&t(o,"explode");if(!n||i.getOption("disableInput"))return e.Pass;for(var a=i.listSelections(),s=0;s<a.length;s++){if(!a[s].empty())return e.Pass;var l=c(i,a[s].head);if(!l||n.indexOf(l)%2!=0)return e.Pass}i.operation(function(){var e=i.lineSeparator()||"\n";i.replaceSelection(e+e,null),i.execCommand("goCharLeft"),a=i.listSelections();for(var t=0;t<a.length;t++){var o=a[t].head.line;i.indentLine(o,null,!0),i.indentLine(o+1,null,!0)}})}function s(t){var i=e.cmpPos(t.anchor,t.head)>0;return{anchor:new u(t.anchor.line,t.anchor.ch+(i?-1:1)),head:new u(t.head.line,t.head.ch+(i?1:-1))}}function l(i,o){var n=r(i);if(!n||i.getOption("disableInput"))return e.Pass;var a=t(n,"pairs"),l=a.indexOf(o);if(-1==l)return e.Pass;for(var c,d=t(n,"closeBefore"),f=t(n,"triples"),p=a.charAt(l+1)==o,g=i.listSelections(),m=l%2==0,v=0;v<g.length;v++){var w,y=g[v],b=y.head,x=i.getRange(b,u(b.line,b.ch+1));if(m&&!y.empty())w="surround";else if(!p&&m||x!=o)if(p&&b.ch>1&&f.indexOf(o)>=0&&i.getRange(u(b.line,b.ch-2),b)==o+o){if(b.ch>2&&/\bstring/.test(i.getTokenTypeAt(u(b.line,b.ch-2))))return e.Pass;w="addFour"}else if(p){var k=0==b.ch?" ":i.getRange(u(b.line,b.ch-1),b);if(e.isWordChar(x)||k==o||e.isWordChar(k))return e.Pass;w="both"}else{if(!m||!(0===x.length||/\s/.test(x)||d.indexOf(x)>-1))return e.Pass;w="both"}else w=p&&h(i,b)?"both":f.indexOf(o)>=0&&i.getRange(b,u(b.line,b.ch+3))==o+o+o?"skipThree":"skip";if(c){if(c!=w)return e.Pass}else c=w}var C=l%2?a.charAt(l-1):o,S=l%2?o:a.charAt(l+1);i.operation(function(){if("skip"==c)i.execCommand("goCharRight");else if("skipThree"==c)for(var e=0;e<3;e++)i.execCommand("goCharRight");else if("surround"==c){for(var t=i.getSelections(),e=0;e<t.length;e++)t[e]=C+t[e]+S;i.replaceSelections(t,"around"),t=i.listSelections().slice();for(var e=0;e<t.length;e++)t[e]=s(t[e]);i.setSelections(t)}else"both"==c?(i.replaceSelection(C+S,null),i.triggerElectric(C+S),i.execCommand("goCharLeft")):"addFour"==c&&(i.replaceSelection(C+C+C+C,"before"),i.execCommand("goCharRight"))})}function c(e,t){var i=e.getRange(u(t.line,t.ch-1),u(t.line,t.ch+1));return 2==i.length?i:null}function h(e,t){var i=e.getTokenAt(u(t.line,t.ch+1));return/\bstring/.test(i.type)&&i.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}var d={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},u=e.Pos;e.defineOption("autoCloseBrackets",!1,function(o,r,n){n&&n!=e.Init&&(o.removeKeyMap(f),o.state.closeBrackets=null),r&&(i(t(r,"pairs")),o.state.closeBrackets=r,o.addKeyMap(f))});var f={Backspace:n,Enter:a};i(d.pairs+"`")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function i(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var i=e.state.fullScreenRestore;t.style.width=i.width,t.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(o,r,n){n==e.Init&&(n=!1),!n!=!r&&(r?t(o):i(o))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],e):e(CodeMirror)}(function(e){"use strict";function t(e){this.options={};for(var t in d)this.options[t]=(e&&e.hasOwnProperty(t)?e:d)[t];this.overlay=this.timeout=null,this.matchesonscroll=null,this.active=!1}function i(e){var t=e.state.matchHighlighter;(t.active||e.hasFocus())&&r(e,t)}function o(e){var t=e.state.matchHighlighter;t.active||(t.active=!0,r(e,t))}function r(e,t){clearTimeout(t.timeout),t.timeout=setTimeout(function(){s(e)},t.options.delay)}function n(e,t,i,o){var r=e.state.matchHighlighter;if(e.addOverlay(r.overlay=h(t,i,o)),r.options.annotateScrollbar&&e.showMatchesOnScrollbar){var n=i?new RegExp("\\b"+t.replace(/[\\\[.+*?(){|^$]/g,"\\$&")+"\\b"):t;r.matchesonscroll=e.showMatchesOnScrollbar(n,!1,{className:"CodeMirror-selection-highlight-scrollbar"})}}function a(e){var t=e.state.matchHighlighter;t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null,t.matchesonscroll&&(t.matchesonscroll.clear(),t.matchesonscroll=null))}function s(e){e.operation(function(){var t=e.state.matchHighlighter;if(a(e),!e.somethingSelected()&&t.options.showToken){for(var i=!0===t.options.showToken?/[\w$]/:t.options.showToken,o=e.getCursor(),r=e.getLine(o.line),s=o.ch,c=s;s&&i.test(r.charAt(s-1));)--s;for(;c<r.length&&i.test(r.charAt(c));)++c;return void(s<c&&n(e,r.slice(s,c),i,t.options.style))}var h=e.getCursor("from"),d=e.getCursor("to");if(h.line==d.line&&(!t.options.wordsOnly||l(e,h,d))){var u=e.getRange(h,d);t.options.trim&&(u=u.replace(/^\s+|\s+$/g,"")),u.length>=t.options.minChars&&n(e,u,!1,t.options.style)}})}function l(e,t,i){if(null!==e.getRange(t,i).match(/^\w+$/)){if(t.ch>0){var o={line:t.line,ch:t.ch-1},r=e.getRange(o,t);if(null===r.match(/\W/))return!1}if(i.ch<e.getLine(t.line).length){var o={line:i.line,ch:i.ch+1},r=e.getRange(i,o);if(null===r.match(/\W/))return!1}return!0}return!1}function c(e,t){return!(e.start&&t.test(e.string.charAt(e.start-1))||e.pos!=e.string.length&&t.test(e.string.charAt(e.pos)))}function h(e,t,i){return{token:function(o){if(o.match(e)&&(!t||c(o,t)))return i;o.next(),o.skipTo(e.charAt(0))||o.skipToEnd()}}}var d={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};e.defineOption("highlightSelectionMatches",!1,function(r,n,l){if(l&&l!=e.Init&&(a(r),clearTimeout(r.state.matchHighlighter.timeout),r.state.matchHighlighter=null,r.off("cursorActivity",i),r.off("focus",o)),n){var c=r.state.matchHighlighter=new t(n);r.hasFocus()?(c.active=!0,s(r)):r.on("focus",o),r.on("cursorActivity",i)}})});