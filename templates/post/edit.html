{% extends 'base.html' %}

{% block css %}

<link rel="stylesheet" href="{{ url_for('static', filename='editormd/css/editormd.min.css')}}">

{% endblock %}

{% block title %}Let's Write{% endblock %}

{% block main %}

<!-- ç¼–è¾‘æ  -->
<form class="container font-400 container-edit " method="POST">
    <div class="row mx-1">

        <div class="row input-group mt-5 justify-content-between" style="margin-right: 0px; margin-left: 0px;">

            <select class="col-4 custom-select font-md edit-input" style="border-radius: 15px;" name="type" {% if post[0] != 0 and g.userinfo[2] != 'admin' and g.userinfo[2] != 'part'~post[2] %}disabled="disabled"{% endif %} required>
                <option value="1" {% if post != None and post[2] == 1 %}selected="select"{% endif %}>æŠ€æœ¯åˆ†äº«</option>
                <option value="2" {% if post != None and post[2] == 2 %}selected="select"{% endif %}>å­¦ä¹ ç”Ÿæ´»</option>
                <option value="3" {% if post != None and post[2] == 3 %}selected="select"{% endif %}>ä¼‘é—²å¨±ä¹</option>
                <option value="4" {% if post != None and post[2] == 4 %}selected="select"{% endif %}>æ‘¸é±¼çŒæ°´</option>
            </select>

            <input type="text" class="col-7 form-control font-md edit-input font-title" style="border-radius: 15px;"
                name="title" placeholder="æ ‡é¢˜..." value="{%if post != None %}{{ post[1] }}{% endif %}" required>

        </div>

        <div id="test-editor" class=" row mt-4">
            <textarea class="col-12" name="content" style="display:none;" required>
{% if post[0] != 0%}{{post[3]}}{% else %}
### è¿™æ˜¯å°æ ‡é¢˜ğŸ§‘
**è¿™æ˜¯ç²—ä½“â¤**

> è¿™æ˜¯å¼•ç”¨ğŸ

*æ–œä½“ä¸ç”¨æˆ‘å¤šè¯´äº†å§*

~~æˆ‘è¢«åˆ é™¤äº†ğŸ˜…~~

```
Hello World!
è¿™é‡Œæ”¾ä»£ç ğŸ¥³
```
![å›¾ç‰‡](http://cdn.jsdelivr.net/gh/LastDance-Miss/image/img04/20200603121555.png)
{% endif %}
</textarea>
        </div>

    </div>

    <div class="row justify-content-end mx-2 mt-3 mb-2">
        <button type="submit" class="edit-submit-bnt px-3 my-2 button-hover">
        {% if post[0] != 0 %}ä¿&nbsp;&nbsp;&nbsp;å­˜{% else %}å‘&nbsp;&nbsp;&nbsp;å¸ƒ{% endif %}
        </button>
    </div>
</form>

{% endblock %}

{% block js %}

<!-- <script src="{{ url_for('static', filename='editormd/editormd.js') }}"></script> -->
<script src="https://cdn.bootcdn.net/ajax/libs/editor-md/1.5.0/editormd.min.js"></script>

<script type="text/javascript">
    $(function () {
        var editor = editormd("test-editor", {
            emoji: true,
            height: 600,
            imageUpload: true,
            imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
            tex: true,                   // å¼€å¯ç§‘å­¦å…¬å¼TeXè¯­è¨€æ”¯æŒï¼Œé»˜è®¤å…³é—­
            flowChart: true,             // å¼€å¯æµç¨‹å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­
            sequenceDiagram: true,       // å¼€å¯æ—¶åº/åºåˆ—å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­
            imageUploadURL: "{{ url_for('edit.upload') }}",  
            path: "{{ url_for('static',filename='editormd/lib/') }}",
            toolbarIcons: function () {
                return ["undo", "redo", "|", "bold", "del", "italic", "quote", "ucwords", "uppercase", "|", "h1", "h2", "h3", "|", "list-ul", "list-ol", "hr", "|", "link", "reference-link", "image", "code", "code-block", "table", "datetime", "emoji", "html-entities", "|", "goto-line", "watch", "preview", "clear", "search", "|", "help", "info"]
            }
        });
    });
</script>

{% endblock %}